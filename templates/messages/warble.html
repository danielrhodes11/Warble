{% extends 'base.html' %}

{% block content %}

<!-- warble.html (a new HTML template) -->
<li class="list-group-item">
    <a href="/messages/{{ msg.id }}" class="message-link"/>
    <a href="/users/{{ msg.user.id }}">
        <img src="{{ msg.user.image_url }}" alt="" class="timeline-image">
    </a>
    <div class="message-area">
        <a href="/users/{{ msg.user.id }}">@{{ msg.user.username }}</a>
        <span class="text-muted">{{ msg.timestamp.strftime('%d %B %Y') }}</span>
        <p>{{ msg.text }}</p>
    </div>
    <!-- Add this form to allow liking/unliking via AJAX -->
    <form method="POST" action="/users/toggle_like/{{ msg.id }}" class="like-form">
        <button type="submit" class="like-button">
            {% if msg in g.user.likes %}
                Unlike
            {% else %}
                Like
            {% endif %}
        </button>
    </form>
</li>


{% endblock %}

